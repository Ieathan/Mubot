mock_bot =
  logger:
    error: (msg) ->
      mock_bot.logs.error.push msg
      mock_bot.onError(msg) if mock_bot.onError?
    debug: (msg) ->
      mock_bot.logs.debug.push msg
  clean: ->
    mock_bot.onError = null
    mock_bot.logs = { error: [], debug: [] }

gh = require("../src/gitmubot") mock_bot
nock = require("nock")
module.exports = [ gh, require("assert"), nock, mock_bot ]

beforeEach ->
  nock.cleanAll()
  mock_bot.clean()
