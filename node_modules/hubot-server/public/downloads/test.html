<script>

  window.add = (num1, num2, base) => {
//debugger; 
   // Our core buffer.
    var res = [], carry = 0, i = 0;
    while(i < num1.length || i < num2.length || carry) { //|| i < num2.length || carry) {
      let total = carry + (num1[i]||0) + (num2[i]||0);
      // Modulous devision to swap bases. newNum = remainder concatinated with the remainders remainder and so on.
      carry = (total - (res[i++] = total % base)) / base
    }
    return res
  };

  window.quick = (number, base) => {
    var res = [], carry = number, i = 0;
    do {

      number = (number - (res[i++] = number % base)) / base
    } while(carry);
    return res
  };


  window.multiply = (num, exponent, base) => {

    if(num <= 0) return num === 0 ? [] : null;
    var result = new Uint32Array();
    while(true) {
      // Bit shit to the right and keep doubling the exponent
      num & 1 && (result = window.add(result, exponent, base)); // First iteration will be 1.
      num = num >> 1;
      if(num === 0) break;
      exponent = window.add(exponent, exponent, base) // double.
    }
    return result
  };
  // Swap out to buffers to avoid memory limits.
  window.toDigits = (str, baseAlphabet) => {
    var charValues = str.split('');
    var res = new Uint32Array(charValues.length);
    var j = 0;
    for(let i = charValues.length - 1; i >= 0; i--) {
      var n = baseAlphabet.indexOf(charValues[i]);
      if(n < 0) throw new Error("Your data is not found in your alphabet.");
      res[j++] = n;
    }
    return res
  };

  window.convert = (str, fromAlphabet, toAlphabet) => {
    var fromBase = fromAlphabet.length,
    toBase = toAlphabet.length,
    charValues = window.toDigits(str.toString(), fromAlphabet); // coerce numbers to string
    if(charValues === null) return null;
    var resNumbers = new Uint32Array(), exp = [1];
    for(let i = 0; i < charValues.length; ++i) {
      resNumbers = window.add(resNumbers, window.multiply(charValues[i], exp, toBase), toBase);
      exp = window.multiply(fromBase, exp, toBase)
    }
    // And ends here.
    var res = '';
    if(!resNumbers.length) {
      let i = str.length;
      while(i--)
        // The stream being encoded was pure zeros.
        res += toAlphabet[0]
    } else {
      let i = resNumbers.length;
      while(i--)
        res += toAlphabet[resNumbers[i]]
    }
    return res
  };

</script>
